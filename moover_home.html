<!DOCTYPE html>
<html>
<head>
<center>
	<meta name="viewport" content="width=device-width, initial-scale=1">
       <style>
           img {
             display: block;
             margin-left: auto;
             margin-right: auto;
           }
       </style>
	<link rel="stylesheet" href="./index.css">
</center>
</head>
   
  
<body>

 <body style= "background-color:  #E6FBFF;">
 
 <div id="demo">
<h2>The XMLHttpRequest Object</h2>
<button type="button" onclick="loadDoc()">Change Content</button>
</div>




<script src="../lib/microapp.js"></script>
<script>

function loadDoc() {
var contactJid1=getContactJid();
	var data = JSON.stringify({
  "online": "true",
  "lat": la,
  "long": lo,
  "Jid": contactJid
	});
	var msdsin=getNumber();
var driverurl=("https://moba-moover.herokuapp.com/drivers/").concat(msdsin);
	document.getElementById("uName").innerHTML = driverurl; 
	
	
	var xhr = new XMLHttpRequest();
	//xhr.withCredentials = true;

	xhr.addEventListener("readystatechange", function() {
	  if(this.readyState === 4) {
		console.log(this.responseText);
	  }
	});

	xhr.open("PUT", driverurl);
	xhr.setRequestHeader("Content-Type", "application/json");

	xhr.send(data);
	
	
	
	
}
</script>
 
 
<center>
  
<br><br><br>
  
<img src = logo.png> <br><br><br> 
  
<h4>  Profile test get loc5 </h4>  
<p id="uName"></p>

<p id="uLoc"></p>
</center>
<script>


text = "Name:" + " phName";
 text1 = "Location:" + " phLoaction";
document.getElementById("uName").innerHTML = text; 
  document.getElementById("uLoc").innerHTML = text1; 
</script>

<script>
function change_page(){
  window.location.href = "moover_chat.html";
} 

function getNumber(){
var hold=Ayoba.getMsisdn();
	return hold;
}

var driverurl=("https://moba-moover.herokuapp.com/drivers/").concat(msdsin);
document.getElementById("uName").innerHTML = driverurl; 


var la = "TEXT";
var lo = "TEXT";
 function onLocationChanged(lat, lon) {
        la = lat
		lo=lon;
		var data = JSON.stringify({
  "lat": la,
  "long": lo
	});

	var xhr = new XMLHttpRequest();
	//xhr.withCredentials = true;

	xhr.addEventListener("readystatechange", function() {
	  if(this.readyState === 4) {
		console.log(this.responseText);
	  }
	});
	xhr.open("PUT", driverurl);
	xhr.setRequestHeader("Content-Type", "application/json");
	xhr.send(data);
    }
function moove_hist(){

}


function getURLParameter(sParam) {
    var sPageURL = window.location.search.substring(1);
    var sURLVariables = sPageURL.split('?');
    for (var i = 0; i < sURLVariables.length; i++) {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam) {
            return sParameterName[1];
        }
    }
}

function getContactJid() {
    var contactJid = getURLParameter("jid");
    return contactJid
}
 

</script>
   
<br><br><br><br><br>
   
<center>
<input id = "btn" type="button" value="    GO online    " onclick="loadDoc()"/>
 <br><br>
</center>
  <center><input id = "btn" type="button" value=" Moove History " onclick="outputLoc()"/></center> 
</body>
</html>
